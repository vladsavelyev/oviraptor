{% set data=load_setup_py_data() %}

package:
  name: ovirage
  version: {{ data.version }}

source:
  path: ../../

build:
  number: 0

requirements:
  build:
    - python
    {% for dep in data.get("install_requires", []) -%}
    - {{ dep.lower() }}
    {% endfor %}

  run:
    - python
    {% for dep in data.get("install_requires", []) -%}
    - {{ dep.lower() }}
    {% endfor %}
    - snakemake-minimal
    - samtools
    - sambamba
    - mosdepth
    - minimap2
    - bcftools
    - pysam  # to process tje BAM file for lumpy
    - awscli  # to download the reference fasta

test:
  commands:
    - ovirage --help

about:
  home: {{ data['url'] }}
  license: {{ data['license'] }}
  summary: {{ data['description'] }}
